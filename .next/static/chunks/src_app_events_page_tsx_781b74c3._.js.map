{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/PSYPHER%20AI%20PROJECT%20APP/tier-events/src/app/events/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useUser } from '@clerk/nextjs';\r\nimport { useEffect, useState } from 'react';\r\nimport { createClient } from '@/utils/supabase/client';\r\nimport Image from 'next/image';\r\n\r\ntype Event = {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  event_date: string;\r\n  image_url: string;\r\n  tier: 'free' | 'silver' | 'gold' | 'platinum';\r\n};\r\n\r\nconst tierOrder = ['free', 'silver', 'gold', 'platinum'];\r\n\r\nexport default function EventsPage() {\r\n  const { user, isLoaded } = useUser();\r\n  const [events, setEvents] = useState<Event[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!isLoaded || !user) return;\r\n\r\n    const fetchEvents = async () => {\r\n      const supabase = createClient();\r\n\r\n      const userTier = user.publicMetadata.tier as Event['tier'] || 'free';\r\n      const allowedTiers = tierOrder.slice(0, tierOrder.indexOf(userTier) + 1);\r\n\r\n      const { data, error } = await supabase\r\n        .from('events')\r\n        .select('*')\r\n        .in('tier', allowedTiers);\r\n\r\n      if (error) {\r\n        console.error('Error fetching events:', error.message);\r\n      } else {\r\n        setEvents(data as Event[]);\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchEvents();\r\n  }, [isLoaded, user]);\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Your Tier Events</h1>\r\n\r\n      {loading ? (\r\n        <p>Loading events...</p>\r\n      ) : (\r\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n          {events.map((event) => (\r\n            <div\r\n              key={event.id}\r\n              className=\"bg-white dark:bg-zinc-900 rounded-xl overflow-hidden shadow-md border\"\r\n            >\r\n              <Image\r\n                src={event.image_url}\r\n                alt={event.title}\r\n                width={400}\r\n                height={250}\r\n                className=\"w-full h-48 object-cover\"\r\n              />\r\n              <div className=\"p-4\">\r\n                <h2 className=\"text-xl font-semibold\">{event.title}</h2>\r\n                <p className=\"text-gray-600 dark:text-gray-300\">{event.description}</p>\r\n                <p className=\"text-sm text-gray-400 mt-2\">\r\n                  {new Date(event.event_date).toLocaleDateString()}\r\n                </p>\r\n                <span className={`inline-block mt-2 px-3 py-1 rounded-full text-xs font-medium text-white ${\r\n                  event.tier === 'free' ? 'bg-green-500' :\r\n                  event.tier === 'silver' ? 'bg-gray-500' :\r\n                  event.tier === 'gold' ? 'bg-yellow-500' :\r\n                  'bg-purple-600'\r\n                }`}>\r\n                  {event.tier.toUpperCase()}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;;;;;AAEA;;;AALA;;;;;AAgBA,MAAM,YAAY;IAAC;IAAQ;IAAU;IAAQ;CAAW;AAEzC,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,+JAAA,CAAA,UAAO,AAAD;IACjC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAW,EAAE;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;gCAAE;YACR,IAAI,CAAC,YAAY,CAAC,MAAM;YAExB,MAAM;oDAAc;oBAClB,MAAM,WAAW;oBAEjB,MAAM,WAAW,KAAK,cAAc,CAAC,IAAI,IAAqB;oBAC9D,MAAM,eAAe,UAAU,KAAK,CAAC,GAAG,UAAU,OAAO,CAAC,YAAY;oBAEtE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,UACL,MAAM,CAAC,KACP,EAAE,CAAC,QAAQ;oBAEd,IAAI,OAAO;wBACT,QAAQ,KAAK,CAAC,0BAA0B,MAAM,OAAO;oBACvD,OAAO;wBACL,UAAU;oBACZ;oBAEA,WAAW;gBACb;;YAEA;QACF;+BAAG;QAAC;QAAU;KAAK;IAEnB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;YAEvC,wBACC,6LAAC;0BAAE;;;;;qCAEH,6LAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,sBACX,6LAAC;wBAEC,WAAU;;0CAEV,6LAAC,gIAAA,CAAA,UAAK;gCACJ,KAAK,MAAM,SAAS;gCACpB,KAAK,MAAM,KAAK;gCAChB,OAAO;gCACP,QAAQ;gCACR,WAAU;;;;;;0CAEZ,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAAyB,MAAM,KAAK;;;;;;kDAClD,6LAAC;wCAAE,WAAU;kDAAoC,MAAM,WAAW;;;;;;kDAClE,6LAAC;wCAAE,WAAU;kDACV,IAAI,KAAK,MAAM,UAAU,EAAE,kBAAkB;;;;;;kDAEhD,6LAAC;wCAAK,WAAW,AAAC,2EAKjB,OAJC,MAAM,IAAI,KAAK,SAAS,iBACxB,MAAM,IAAI,KAAK,WAAW,gBAC1B,MAAM,IAAI,KAAK,SAAS,kBACxB;kDAEC,MAAM,IAAI,CAAC,WAAW;;;;;;;;;;;;;uBAtBtB,MAAM,EAAE;;;;;;;;;;;;;;;;AA+B3B;GAxEwB;;QACK,+JAAA,CAAA,UAAO;;;KADZ","debugId":null}}]
}